@page
@model IndexModel
@{
	ViewData["Title"] = "律師好神行車平安符";
}

<body>
	 <!-- Google Tag Manager (noscript) -->
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-KVK5QXGJ"
    height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <!-- End Google Tag Manager (noscript) -->
    <div class="nav-bar w-100 d-none d-lg-block">
        <div class="container">
            <div class="row align-items-center">
                <div class="col">
                    <a href="#"><img src="assets/img_topbar_logo.png"></img></a>
                </div>
                <div class="col-auto text-end d-none d-lg-block">
                    <a href="#s3" class="nav-item px-2">什麼是律師好神？</a>
                    <a href="#s7" class="nav-item px-2">使用者見證</a>
                    <a href="#faq" class="nav-item px-2">常見問答</a>
                    <a href="https://office.pamolaw.com/traffics" target="_blank" class="nav-item px-2">略策法律事務所</a>
                    <span class="nav-item px-2">
                        <a href="#purchase" class="button">立即購買</a>
                    </span>
                </div>
            </div>
        </div>
    </div>
    <div class="bottom-bar d-lg-none d-block">
        <div class="row">
            <div class="col-8 p-0"><a href="#purchase" class="button w-100 py-3"><h3 class="m-0">立即購買</h3></a></div>
            <div class="col p-0"><a href="#purchase" class="button secondary w-100 py-3" id="btn_menu"><h3 class="m-0">主選單</h3></a></div>
        </div>
    </div>
    <div id="mobile-menu">
        <div class="container h-100 text-center">
            <div class="row h-100 justify-content-between" style="flex-direction: column;">
                <div class="col">
                    <a href="#" class="nav-item">
                        <img class="mb-3" src="assets/img_comments_logo.png"/>
                    </a>
                </div>
                <div class="col-auto">
                    <div class="row">
                        <a href="https://office.pamolaw.com/traffics" target="_blank" class="nav-item px-2 mb-3">略策法律事務所</a>
                        <a href="#s3" class="nav-item px-2 mb-3"><h2>什麼是律師好神？</h2></a>
                        <a href="#s7" class="nav-item px-2 mb-3"><h2>使用者見證</h2></a>
                        <a href="#s5" class="nav-item px-2 mb-3"><h2>什麼是車禍線上律師</h2></a>
                        <a href="#faq" class="nav-item px-2 mb-3"><h2>常見問答</h2></a>
                        <a href="#" class="nav-item button secondary w-100 py-3"><h3 class="m-0">關閉選單</h3></a>
                    </div> 
                </div>
            </div>
        </div>
    </div>
    <div class="section" id="s1">
        <div class="container">
            <div class="row justify-content-center">
                <div class="col-6"></div>
                <div class="col-lg-6 text-center">
                    <img src="assets/img_landing_logos.png"/>
                    <h3>首款結合律師服務的平安符</h3>
                    <div class="col-sm-auto p-0 d-none d-md-block">
                        <img src="assets/img_landing_main.png"/>
                    </div>
                    <div class="col-auto d-md-none d-block">
                        <img src="assets/img_landing_main_m.png" />
                    </div>
                    <img src="assets/img_landing_price.png" />
                    <div class="w-100"></div>
                    <a href="#purchase" class="button w-75"><h1 class="m-0">立即購買</h1></a>
                </div>
            </div>
        </div>
    </div>
    <div class="section bg-black" id="s2">
        <div class="container text-white">
            <div class="row align-items-center mb-4 justify-content-center">
                <div class="col-12 text-white text-center">
                    <h2>根據交通部統計，<br/>
                        每天車禍至少1000件
                    </h2>
                    <p class="text-grey">車險只能處理不到一半的車禍...</p>
                    <h1>
                        <span class="jumbo">50</span><span>%</span>
                        <div>需要法律支援</div>
                    </h1>
                    
                   
                </div>
                <div class="col-lg-8">
                    <img src="assets/img_chart.png"></img>
                </div>
            </div>
            <h1 class="text-center text-white">車禍，不能只有車險</h1>
            <h3 class="text-center mb-4 text-grey">看看大家遇到什麼樣的車禍</h3>
            <div class="row text-center mb-4">
                <div class="col-lg-3 col-6">
                    <a href="assets/s2_1.mp4" data-fancybox data-width="620" data-height="1080"><img src="assets/img_interview_1.png"/></a>
                    <p class="mb-0 text-grey">陳先生 / 上班族</p>
                    <h3>保險不賠</h3>
                </div>
                <div class="col-lg-3 col-6">
                    <a href="assets/s2_2.mp4" data-fancybox data-width="620" data-height="1080"><img src="assets/img_interview_2.png"/></a>
                    <p class="mb-0 text-grey">許小姐 / 二寶媽</p>
                    <h3>對方獅子大開口</h3>
                </div>
                <div class="col-lg-3 col-6">
                    <a href="assets/s2_3.mp4" data-fancybox data-width="620" data-height="1080"><img src="assets/img_interview_3.png"/></a>
                    <p class="mb-0 text-grey">施先生 / 公司高管</p>
                    <h3>擔心子女被欺負</h3>
                </div>
                <div class="col-lg-3 col-6">
                    <a href="assets/s2_4.mp4" data-fancybox data-width="620" data-height="1080"><img src="assets/img_interview_4.png"/></a>
                    <p class="mb-0 text-grey">梁女士 / 計程車司機</p>
                    <h3>對方搞消失</h3>
                </div>
            </div>
            
        </div>
        
    </div>
    <div class="section" id="s2-how">
        <div class="container text-white text-center">
            <h2 class="mb-5">發生車禍<br/>後續到底該怎麼辦？</h2>
            <div class="text-center"><a href="https://youtu.be/9QsuPzHqzCQ?si=LxFt30WMX9O7Ht3o" data-fancybox data-width="620" data-height="1080" class="button"><h3>觀看影片</h3></a></div>
        </div>
    </div>
    <div class="section bg-black text-white" id="s3">
        <div class="container">
            <h1 class="text-center mb-lg-0 mb-5" style="z-index: 2; position: relative;;">不只是<span class="text-golden">護身符</span><br/>
                更是每個人都能使用的<br /><span class="text-golden">律師服務</span></h1>
            <div class="row align-items-center">
                <img class="d-none d-md-block" style="margin-top: -150px; z-index: 1;" src="assets/img_s3_desktop.png"/>
                <img class="d-md-none d-block" style="margin-top: -150px; z-index: 1;" src="assets/img_s3_mobile.png"/>
            </div>
        </div>
    </div>
    <div class="section" id="s4">
        <div class="container">
            <div class="row text-center align-items-center mb-5">
                <div class="col-lg-6">
                    <h1>平時掛車上保平安</h1>
                    <p>大甲鎮瀾宮官方授權宮徽、喜氣又好看，<br/>天上媽祖神力保平安，驅散三寶</p>
                </div>
                <div class="col-lg-6">
                    <img src="assets/img_scenarios_front.png"></img>
                </div>
            </div>
            <div class="row text-center align-items-center">
                <div class="col-lg-6 order-lg-last">
                    <h1>車禍時呼叫律師</h1>
                    <p>迅速翻面掃碼QRcode，<br/>地上法師來助陣！</p>
                </div>
                <div class="col-lg-6">
                    <img src="assets/img_scenarios_back.png"></img>
                </div>
            </div>
        </div>
    </div>
    <div class="section bg-red text-white">
        <div class="container text-center">
            <h1 class="mb-5">大甲鎮瀾宮過爐儀式</h1>
            <div class="row">
                <div class="col">
                    <div id="bg-video">
                        <video autoplay muted playsinline loop>
                            <source src="assets/video_landing_bg.mp4" type="video/mp4">
                        </video>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="section" id="s5">
        <div class="container text-center">
            <h1 class="text-center">車禍大小事<br/>就靠<br class="d-md-none d-block"/>車禍線上律師!</h1>
            <a href="https://youtu.be/JqYBpLIagMw?si=RloJ46LkK8DZK7hn" data-fancybox data-width="620" data-height="1080" class="button mb-5">觀看介紹影片</a>
            <div class="row justify-content-center">
                <div class="col-lg-8">
                    <a href="assets/img_table@2x.png" data-fancybox>
                        <img src="assets/img_table.png"></img>
                    </a>
                </div>
            </div>
        </div>
    </div>
    <div class="section bg-red text-white text-center" id="s6">
        <div class="container">
            <h1 class="text-center mb-5">讓律師好神，<br/>
                做他們最堅強的後盾</h1>
            <div class="row justify-content-center">
                <div class="col-md-6 mb-4">
                    <img src="assets/img_gift_left.png"></img>
                </div>
                <div class="col-md-6 mb-4">
                    <img src="assets/img_gift_right.png"></img>
                </div>
            </div>
        </div>
    </div>
    <div class="section bg-red text-white text-center" id="gift">
        <div class="container">
            <h1 class="text-center mb-4">最實用的禮<br/>
                給最關心的人</h1>
            <a href="#purchase" class="button"><h3>送一份最實用的禮</h3></a>
        </div>
    </div>
    <div class="section bg-red text-white" id="s7">
        <div class="container text-center">
            <img src="assets/img_comments_logo.png"/>
            <h1 class="text-center mb-5">預購大熱賣！好評追貨中！</h1>
        </div>
        <div class="marquee-1">
            <div class="d-flex">
                <div class="comment">
                    <div class="name">台北 / 王X傑</div>
                    <div class="conent">謝謝協助交通事故處理，車禍時最需要有人關心，非常有愛</div>
                </div>
                <div class="comment">
                    <div class="name">台北 / 黃X仁</div>
                    <div class="conent">隔行如隔山，工程師不太懂法律，所以找信任的團隊幫忙</div>
                </div>
                <div class="comment">
                    <div class="name">高雄 / 陳X偉</div>
                    <div class="conent">司機發生車禍時會手足無措會緊張不知方向。透過律師的解說了解很多放心很多，我會轉告其他司機，多利用這個管道！律師謝謝您</div>
                </div>
                <div class="comment">
                    <div class="name">嘉義 / 許X榮</div>
                    <div class="conent">結合神明與律師，很創新的聯名</div>
                </div>
                <div class="comment">
                    <div class="name">台北 / 卓X憲</div>
                    <div class="conent">電話裡可以聽得到重點，把複雜的事情變簡單，很重要</div>
                </div>
                <div class="comment">
                    <div class="name">高雄 / 陳X芬</div>
                    <div class="conent">專業，但我想強調的是：服務態度非常好！</div>
                </div>
                <div class="comment">
                    <div class="name">台北 / 張X瑄</div>
                    <div class="conent">已經送給家人，希望駕駛人有良好的保障</div>
                </div>
            </div>
        </div>
    </div>
    <div class="section text-center">
        <div class="container">
            <h1 class="mb-5">多家外送企業信賴的夥伴</h1>
            <div class="row">
                <div class="col-lg-3 col-6">
                    <img src="assets/logo-mcd.png"/>
                </div>
                <div class="col-lg-3 col-6">
                    <img src="assets/logo-npl.png"/>
                </div>
                <div class="col-lg-3 col-6">
                    <img src="assets/logo-taxigo.png"/>
                </div>
                <div class="col-lg-3 col-6">
                    <img src="assets/logo-lalamove.png"/>
                </div>
            </div>
        </div>
    </div>
    <div class="section">
        <div class="container text-center">
            <img src="assets/img_purchase_logo.png"/>
            <h1 class="mb-5">龍年首購！優惠滿滿!</h1>
            <h3 id="purchase">律師好神行車平安符套組<br/>包含以下內容</h3>
            <div class="row" >
                <div class="col-4">
                    <img src="assets/img_package_1.png"></img>
                    <p>車禍線上律師<br/>服務一年份</p>
                </div>
                <div class="col-4">
                    <img src="assets/img_package_2.png"></img>
                    <p>質感護身符<br/>一枚</p>
                </div>
                <div class="col-4">
                    <img src="assets/img_package_3.png"></img>
                    <p>開通說明書<br/>一份</p>
                </div>
            </div>
            <div class="row mb-5">
                <div class="col-lg-4 col-12">
                    <a href="#purchase-form" class="btn_plan" id="1888"><img src="assets/img_purchase_plan_1.png"/></a>
                </div>
                <div class="col-lg-4 col-6">
                    <a href="#purchase-form" class="btn_plan" id="3699"><img src="assets/img_purchase_plan_2.png"/></a>
                </div>
                <div class="col-lg-4 col-6">
                    <a href="#purchase-form" class="btn_plan" id="8888"><img src="assets/img_purchase_plan_3.png"/></a>
                </div>
            </div>
            <div class="row justify-content-center mb-5">
                <form class="col-lg-8 p-5 purchase-form" id="purchase-form">
                    <div class="row text-start justify-content-center">
                        <div class="col-lg-6">
                            <div class="mb-4">
                                <label for="PersonName">姓名</label>
                                <input class="form-control w-100" type="text" id="PersonName" required>
                            </div>
                            <div class="mb-4">
                                <label for="PhoneNumber">手機</label>
                                <input class="form-control w-100" type="tel" id="PhoneNumber" required>
                            </div>
                            <div class="mb-4">
                                <label for="Address">配送地址</label>
                                <input class="form-control w-100" type="text" id="Address" required>
                            </div>
                        </div>
                        <div class="col-lg-6 card-number-group">
                            <div class="mb-4">
                                <label>信用卡卡號</label>
                                <div class="form-control w-100 card-number"></div>
                            </div>
                            <div class="mb-4 expiration-date-group">
                                <label>信用卡有效年限</label>
                                <div class="form-control w-100 expiration-date" id="tappay-expiration-date"></div>
                            </div>
                            <div class="mb-4 cvc-group">
                                <label>信用卡驗證碼</label>
                                <div class="form-control w-100 cvc" type="creditcard"></div>
                            </div>
                        </div>
                    </div>
                    <hr />
                    <div class="row text-start justify-content-center">
                        <div class="col-lg-6 mb-3">
                            <div>購入方案</div>
                            <select id="plan_selector" class="form-control w-100">
                                <option value="1888">律師好神一入組</option>
                                <option value="3699">律師好神二入組</option>
                                <option value="8888">律師好神五入組</option>
                            </select>
                        </div>
                        <div class="col-lg-6 mb-3">
                            <div>購入組數</div>
                            <select id="quantity_seletor" class="form-control w-100">
                                <option>1</option>
                                <option>2</option>
                                <option>3</option>
                                <option>4</option>
                                <option>5</option>
                                <option>6</option>
                                <option>7</option>
                                <option>8</option>
                                <option>9</option>
                                <option>10</option>
                            </select>
                        </div>
                    </div>
                    <hr />
                    <div class="row text-start align-items-end justify-content-center">
                        <div class="col-lg-6">
                            <p class="m-0">總金額</p>
                            <h2>NT$<span id="purchased-sum">1888</span></h2>
                        </div>
                        <div class="col-lg-6 text-end">
                            <input class="button w-100" type="submit" value="確認並付款">
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>
    <div class="section" id="faq">
            <div class="container text-center">
                <img class="mb-5" src="assets/img_faq.png"/>
                <div class="row justify-content-center">
                    <div class="col-lg-8 text-start">
                        <div class="mb-5">
                            <h2>Q：我是汽車／機車駕駛人，我有保險，我有需要車禍線上律師服務嗎？</h2>
                            <p>A：保險公司透過「賠償」來處理車禍；PAMO透過「法律」與「溝通」，為您解決「錢解決不了」的問題。50%的車禍案件，保險無法有效地處理，所以許多知名企業，都有額外採用我們的服務。</p>
                        </div>
                        <div class="mb-5">
                            <h2>Q：律師事務所很多，為什麼我應該選PAMO？</h2>
                            <p>A：每個律師與律師事務所都有不同的專長。我們每年協助處理超過百起車禍案件，而且是臺灣少數針對「交通」領域，提供不同於傳統收費與服務模式的法律事務所。</p>
                        </div>
                        <div class="mb-5">
                            <h2>Q：購買「律師好神 行車平安符」後，享有車禍線上律師服務的效期是多久？</h2>
                            <p>A：購買並線上開通PAMO車禍線上律師服務後，您的PAMO會員身份將持續一整年。車禍相關的問題，都歡迎您與我們聯絡，會員期間，我們不限制您的通話時數與次數。</p>
                        </div>
                        <div class="mb-5">
                            <h2>Q：PAMO的服務時間為何？</h2>
                            <p>A：我們的服務時間是週一至週日（不含國定假日），每天09：30至18：30。我們週末也為您服務。
                            </p>
                        </div>
                        <div class="mb-5">
                            <h2>Q：PAMO服務有何限制？</h2>
                            <p>A：如果車禍的對方也是PAMO的會員、PAMO其他案件委託人、PAMO企業客戶的員工、又或是已經與本所夥伴就相關案件有聯繫者，我們依法就不能再就這起案件提供協助唷。遇到這種情況，我們會很明確的跟您說不能服務的原因。
                            </p>
                        </div>
                        <div class="mb-5">
                            <h2>Q：可否大量採購？收據是否可以打上統編？</h2>
                            <p>可以。但因為收據開立的方式有所不同，您若需要大量採購或收據需備註統編，請您與我們聯繫，我們會由專人為您服務。</p>
                        </div>
                    </div>
                </div>
            </div>
    </div>
    <div class="section">
        <div class="container text-center">
            <h3>出貨與購買注意事項</h3>
            <div class="row justify-content-center mb-5">
                <div class="col-lg-8 text-start">
                    <ol class="text-start">
                        <li>拿到商品時，請先「不要」刮開序號貼膜，您於收到商品後，有7天可以向我們要求扣除匯費後退款。但序號一經刮開，我們就不接受任何理由退款。</li>
                        <li>我們要請您儘速檢查平安符，平安符如果有瑕疵，您可以跟我們聯繫，我們會儘速為您更換新商品。</li>
                        <li>序號有開通期間限制，且在您要求我們提供法律服務時，我們設有兩個限制，第一為您需開通滿24小時；第二為您需要完成註冊，因為我們必須認識我們的客戶，避免利益衝突，才能為您提供合於品質的服務。</li>
                        <li>平安符沒有使用期限，但法律服務的效期是1年。PAMO法律服務的2024年的續約費用，為1,200元。</li>
                        <li>您可以自行登入PAMO會員介面，綁定信用卡，避免會期過期而影響您的PAMO點數。PAMO點數，<a href="https://pamolaw.com" target="_blank">詳見官網</a>。</li>
                        <li>運輸過程的包裝破損，不在保固範圍內唷～</li>
                        <li>律師事務所是不開發票的，我們會開立紙本收據並完納印花稅，並將前述收據隨同商品寄給您。</li>
                    </ol>
                </div>
            </div>
        </div>
    </div>
    <div class="footer bg-black">
        <div class="container">
            <div class="row align-items-center">
                <div class="col-auto mb-md-0 mb-5">
                    <img src="assets/img_footer.png"></img>
                </div>
                <div class="col-md text-lg-end text-white">
                    <a href="https://www.pamolaw.com/terms" target="_blank" class="nav-item">服務條款</a>
                    <div class="">
                        台北市中正區信義路二段23號5樓之四<br/>
                        02-5568-6412
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- Messenger Chat Plugin Code -->
    <div id="fb-root"></div>

    <!-- Your Chat Plugin code -->
    <div id="fb-customer-chat" class="fb-customerchat">
    </div>

	<script>
		var chatbox = document.getElementById('fb-customer-chat');
		chatbox.setAttribute("page_id", "233477367540555");
		chatbox.setAttribute("attribution", "biz_inbox");

		window.fbAsyncInit = function () {
			FB.init({
				xfbml: true,
				version: 'v19.0'
			});
		};

		(function (d, s, id) {
			var js, fjs = d.getElementsByTagName(s)[0];
			if (d.getElementById(id)) return;
			js = d.createElement(s); js.id = id;
			js.src = 'https://connect.facebook.net/zh_TW/sdk/xfbml.customerchat.js';
			fjs.parentNode.insertBefore(js, fjs);
		}(document, 'script', 'facebook-jssdk'));

		$('#btn_menu').click(function () {
			$('#mobile-menu').addClass('show');
		})
		$('.nav-item').click(function () {
			$('#mobile-menu').removeClass('show');
		})
		$(window).scroll(function () {
			var scroll = $(window).scrollTop();

			//>=, not <=
			if (scroll >= 500) {
				//clearHeader, not clearheader - caps H
				$(".bottom-bar").addClass("show");
			} else {
				$(".bottom-bar").removeClass("show");
			}
		}); //missing );
		$("#purchase-form").validate();
		//Count Purchased Sum
		$('.btn_plan').click(function () {
			var selectedValue = $(this).attr('id');
			var selectedQuantity = $('#quantity_seletor').val();
			$('#plan_selector').val(selectedValue);
			$('#purchased-sum').html(selectedValue * selectedQuantity)
		})
		$('#plan_selector').on("change", function () {
			var selectedValue = $('#plan_selector').val();
			var selectedQuantity = $('#quantity_seletor').val();
			$('#purchased-sum').html(selectedValue * selectedQuantity)
		});
		$('#quantity_seletor').on("change", function () {
			var selectedQuantity = $('#quantity_seletor').val();
			var selectedValue = $('#plan_selector').val();
			$('#purchased-sum').html(selectedValue * selectedQuantity)
		});

        $('.marquee-1').marquee({
            duration: 14000,
            duplicated: true,
            pauseOnHover: true,
            startVisible: true,
        });

		$(document).ready(function () {
			$('.option').click(function () {
				$(this).parents('.row').find('.option').removeClass('selected')
				$(this).addClass('selected')
			})
			$('.option.how.a').click(function () {
				$('.option-display img').addClass('d-none')
				$('.option-display .a').removeClass('d-none')
			})
			$('.option.how.b').click(function () {
				$('.option-display img').addClass('d-none')
				$('.option-display .b').removeClass('d-none')
			})
			$('.option.how.c').click(function () {
				$('.option-display img').addClass('d-none')
				$('.option-display .c').removeClass('d-none')
			})

			$('.btn-faq').click(function () {
				$('.faq-content').hide()
				$(this).parents('.faq-item').find('.faq-content').toggle()
			})

			//Scroll to pay
			$(".btn-cta").click(function () {
				$([document.documentElement, document.body]).animate({
					scrollTop: $("#pay").offset().top - 100
				}, 500);
			});
		});

		TPDirect.setupSDK(@Model.AppID, '@Model.AppKey', '@Model.Env')
		TPDirect.card.setup({
			fields: {
				number: {
					element: '.form-control.card-number',
					placeholder: '**** **** **** ****'
				},
				expirationDate: {
					element: document.getElementById('tappay-expiration-date'),
					placeholder: 'MM / YY'
				},
				ccv: {
					element: $('.form-control.cvc')[0],
					placeholder: '後三碼'
				}
			},
			styles: {
				'input': {
					'color': 'gray'
				},
				'input.ccv': {
					// 'font-size': '16px'
				},
				':focus': {
					'color': 'black'
				},
				'.valid': {
					'color': 'green'
				},
				'.invalid': {
					'color': 'red'
				}
			}
		})
		// listen for TapPay Field
		TPDirect.card.onUpdate(function (update) {
			/* Disable / enable submit button depend on update.canGetPrime  */
			/* ============================================================ */

			// update.canGetPrime === true
			//     --> you can call TPDirect.card.getPrime()
			// const submitButton = document.querySelector('button[type="submit"]')
			if (update.canGetPrime) {
				// submitButton.removeAttribute('disabled')
				$('button[type="submit"]').removeAttr('disabled')
			} else {
				// submitButton.setAttribute('disabled', true)
				$('button[type="submit"]').attr('disabled', true)
			}


			/* Change card type display when card type change */
			/* ============================================== */

			// cardTypes = ['visa', 'mastercard', ...]
			var newType = update.cardType === 'unknown' ? '' : update.cardType
			$('#cardtype').text(newType)



			/* Change form-group style when tappay field status change */
			/* ======================================================= */

			// number 欄位是錯誤的
			if (update.status.number === 2) {
				setNumberFormGroupToError('.card-number-group')
			} else if (update.status.number === 0) {
				setNumberFormGroupToSuccess('.card-number-group')
			} else {
				setNumberFormGroupToNormal('.card-number-group')
			}

			if (update.status.expiry === 2) {
				setNumberFormGroupToError('.expiration-date-group')
			} else if (update.status.expiry === 0) {
				setNumberFormGroupToSuccess('.expiration-date-group')
			} else {
				setNumberFormGroupToNormal('.expiration-date-group')
			}

			if (update.status.cvc === 2) {
				setNumberFormGroupToError('.cvc-group')
			} else if (update.status.cvc === 0) {
				setNumberFormGroupToSuccess('.cvc-group')
			} else {
				setNumberFormGroupToNormal('.cvc-group')
			}
		})

		$('form').on('submit', function (event) {

			var phoneNumber = $('#PhoneNumber').val();
			var address = $('#Address').val();
			var personName = $('#PersonName').val();
			var groups = $('#quantity_seletor').val();
			var plan = $('#plan_selector').val();
			var price = $('#purchased-sum').text();

			event.preventDefault()

			// fix keyboard issue in iOS device
			forceBlurIos()

			const tappayStatus = TPDirect.card.getTappayFieldsStatus()
			console.log(tappayStatus)

			// Check Basic Info
			if (isMobile(phoneNumber) === false) {
				swal("請輸入正確的手機號碼!", "error phone format", "error", { button: "Cancel" });
				return
			}

			// Check TPDirect.card.getTappayFieldsStatus().canGetPrime before TPDirect.card.getPrime
			if (tappayStatus.canGetPrime === false) {
				swal("卡號授權取得異常", "can not get prime", "error", { button: "Cancel" });
				return
			}

			// Get prime
			TPDirect.card.getPrime(function (result) {
				if (result.status !== 0) {
					swal("卡號授權狀態異常", "get prime error" + result.msg, "error", { button: "Cancel" });
					return
				}

				// Loading Lock
				swal({
					title: "服務開通中，請稍待片刻",
					text: "Please wait while we activate your service.",
					icon: "./assets/loading.gif",
					buttons: false,
					closeOnClickOutside: false,
					timer: 10000,
				});

				var postData = {
					"Prime": result.card.prime,
					"PersonName": personName,
					"Groups": groups,
					"Plan": plan,
					"Price": price,
					"PhoneNumber": phoneNumber,
					"Address": address
				};

				$.ajax({
					method: "post",
					url: "Index?handler=SnedData",
					data: postData,
					beforeSend: function (xhr) {
						xhr.setRequestHeader("X-CSRF-TOKEN",
							$('input:hidden[name="__RequestVerificationToken"]').val());
					},
					error: function (xhr, status, err) {
						shutDownSwal;
						swal("網路發生異常，請聯絡客服人員。", err + " status:" + status, "error", { button: "Cancel" });
					}
				}).done(function (res) {
					shutDownSwal;
					var obj = jQuery.parseJSON(res);
					if (obj.status === "0") {
						swal(obj.msg, "", "success", { button: "Cancel" });
					} else {
						swal(obj.msg, "status:" + obj.status, "error", { button: "Cancel" });
					}
					if (obj.status === "0" || obj.status === "-3") {
						$('.form-control').attr('disabled', true)
						$('button[type="submit"]').attr('disabled', true)
					}
				});

			})
		})

		function setNumberFormGroupToError(selector) {
			$(selector).addClass('has-error')
			$(selector).removeClass('has-success')
		}

		function setNumberFormGroupToSuccess(selector) {
			$(selector).removeClass('has-error')
			$(selector).addClass('has-success')
		}

		function setNumberFormGroupToNormal(selector) {
			$(selector).removeClass('has-error')
			$(selector).removeClass('has-success')
		}

		function forceBlurIos() {
			if (!isIos()) {
				return
			}
			var input = document.createElement('input')
			input.setAttribute('type', 'text')
			// Insert to active element to ensure scroll lands somewhere relevant
			document.activeElement.prepend(input)
			input.focus()
			input.parentNode.removeChild(input)
		}

		function isIos() {
			return /iPad|iPhone|iPod/.test(navigator.userAgent) && !window.MSStream;
		}

		function isMobile(s) {
			var reg = /^09[0-9]{8}$/;
			return reg.test(s)
		}

		function shutDownSwal() {
			$(".swal-overlay").removeClass("swal-overlay--show-modal");
		}

	</script>

</body>
